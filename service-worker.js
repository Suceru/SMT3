const version="build 2018/9/18 18:00",CACHE=version+"::PWA",offlineURL="./assets/no_cached/index.html",installFilesEssential=["./index.html","./manifest.json","./assets/javascripts/modernizr.1aa3b519.js","./javascript/jquery-3.3.1.min.js","./assets/stylesheets/application.css","./javascript/preload.js","./assets/javascripts/application.b438e6c5.js","./stylesheets/extra.css","./javascript/extra.js"].concat(offlineURL),installFilesDesirable=["./favicon.png","./saiming/web_logo.png","./fonts/fonts.css","./fonts/KFOkCnqEu92Fr1Mu51xIIzI.woff2","./fonts/KFOlCnqEu92Fr1MmSU5fBBc4.woff2","./fonts/KFOmCnqEu92Fr1Mu4mxK.woff2","./fonts/KFOlCnqEu92Fr1MmWUlfBBc4.woff2","./fonts/L0x5DF4xlVMF-BfR8bXMIjhLq38.woff2","./fonts/flUhRq6tzZclQEJ-Vdg-IuiaDsNc.woff2","./fonts/fontawesome-webfont.woff2?v=4.7.0","./saiming/404.png"];function installStaticFiles(){return caches.open(CACHE).then(e=>(e.addAll(installFilesDesirable),e.addAll(installFilesEssential)))}function clearOldCaches(){return caches.keys().then(e=>Promise.all(e.filter(e=>e!==CACHE).map(e=>caches.delete(e))))}self.addEventListener("install",e=>{e.waitUntil(installStaticFiles().then(()=>self.skipWaiting()))}),self.addEventListener("activate",e=>{e.waitUntil(clearOldCaches().then(()=>self.clients.claim()))}),self.addEventListener("fetch",e=>{let s=e.request.url;s.includes("www.google-analytics.com")||e.respondWith(caches.open(CACHE).then(t=>t.match(e.request).then(n=>n||fetch(e.request).then(s=>(s.ok&&t.put(e.request,s.clone()),s)).catch(()=>offlineAsset(s)))))});let iExt=["png","jpg","jpeg","gif","webp","bmp","svg"].map(e=>"."+e);function isImage(e){return iExt.reduce((s,t)=>s||e.endsWith(t),!1)}function offlineAsset(e){return isImage(e)?new Response('<svg role="img" viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg"><title>offline</title><path d="M0 0h400v300H0z" fill="#eee" /><text x="200" y="150" text-anchor="middle" dominant-baseline="middle" font-family="sans-serif" font-size="50" fill="#ccc">offline</text></svg>',{headers:{"Content-Type":"image/svg+xml","Cache-Control":"no-store"}}):e.indexOf(".js")>-1?void 0:caches.match(offlineURL)}